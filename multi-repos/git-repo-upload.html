<!DOCTYPE html>
<html lang="zh-cn">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>git repo upload - git-repo</title>
<meta name="description" content="client tool for git centralized workflow (Aone or gerrit)">
<meta name="generator" content="Hugo 0.55.6" />
<link href="http://git-repo.infoindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="http://git-repo.info/multi-repos/git-repo-upload.html">
<link rel="stylesheet" href="http://git-repo.info/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="http://git-repo.info/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="http://git-repo.info/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="git repo upload" />
<meta property="og:description" content="功能 创建代码评审。 对于指定的项目，git-repo 会将本地分支与上一次执行 git repo upload 时上传的提交做比较，（上一次上传提交记录在 refs/published/&lt;branch-name&gt; 的引用中），提示" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://git-repo.info/multi-repos/git-repo-upload.html" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="git repo upload"/>
<meta name="twitter:description" content="功能 创建代码评审。 对于指定的项目，git-repo 会将本地分支与上一次执行 git repo upload 时上传的提交做比较，（上一次上传提交记录在 refs/published/&lt;branch-name&gt; 的引用中），提示"/>

<meta itemprop="name" content="git repo upload">
<meta itemprop="description" content="功能 创建代码评审。 对于指定的项目，git-repo 会将本地分支与上一次执行 git repo upload 时上传的提交做比较，（上一次上传提交记录在 refs/published/&lt;branch-name&gt; 的引用中），提示">



<meta itemprop="wordCount" content="1066">



<meta itemprop="keywords" content="" />
</head>
<body><div class="container"><header>
<h1>git-repo</h1>

<p class="description">client tool for git centralized workflow (Aone or gerrit)</p>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="https://github.com/aliyun/git-repo-go/releases">Download</a></li>
<li><a href="/changelog.html">ChangeLog</a></li>
<li><a href="/contribution.html">Contribution</a></li>
<li><a href="https://github.com/aliyun/git-repo-go/issues">Issue</a></li>
<li><a href="https://github.com/aliyun/git-repo-go">Source code</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>git repo upload</h1>


<h2 id="功能">功能</h2>

<p>创建代码评审。</p>

<p>对于指定的项目，<code>git-repo</code> 会将本地分支与上一次执行 <code>git repo upload</code> 时上传的提交做比较，（上一次上传提交记录在 <code>refs/published/&lt;branch-name&gt;</code> 的引用中），提示您选择一个或多个尚未上传可供审核的分支。</p>

<p><code>git repo upload</code> 命令会启动一个编辑器，编辑器中的内容是此次代码评审的各项可定制的参数，以及待上传的项目和分支列表。</p>

<p>示例如下：</p>

<pre><code>##############################################################################
# Step 1: Input your options for code review
#
# Note: Input your options below the comments and keep the comments unchanged
##############################################################################

# [Title]       : one line message below as the title of code review

# [Description] : multiple lines of text as the description of code review

# [Issue]       : multiple lines of issue IDs for cross references

# [Reviewer]    : multiple lines of user names as the reviewers for code review

# [Cc]          : multiple lines of user names as the watchers for code review

# [Draft]       : a boolean (yes/no, or true/false) to turn on/off draft mode

# [Private]     : a boolean (yes/no, or true/false) to turn on/off private mode


##############################################################################
# Step 2: Select project and branches for upload
#
# Note: Uncomment the branches to upload, and not touch the project lines
##############################################################################
#
# project foo:
#  branch topic1 ( 3 commit(s)) to remote branch master:
#         03c01e211122b49fe05f48e08fd3e1dd1c52e57e
#         ec78989440697fbc13bfbd3ea082fe9b3fc5f2d7
#         4e599aa284ed64ba12ba1b5b06fbbd3199846434
#
# project bar:
#  branch topic1 ( 2 commit(s)) to remote branch master:
#         47a3cae46019893db78a19906dda97825279f288
#         ced1a1d6e16bc3f8051f87621eb69ba2a7e10672 
</code></pre>

<p>Step 1 中以字符 &ldquo;#&rdquo; 开始的行是注释，不要改动注释行，因为 <code>git-repo</code> 要根据注释行的内容判断用户输入内容用于更改哪项代码评审的参数设置。 例如：</p>

<ul>
<li>在 &ldquo;# [Title]&rdquo; 行的下面添加的内容，成为代码评审的标题。默认用提交说明的标题作为代码评审标题。</li>
<li>在 &ldquo;# [Description]&rdquo; 行的下面添加的内容，成为代码评审的详细描述。默认用提交说明的内容作为代码评审的详细描述。</li>
<li>在 &ldquo;# [Issue]&rdquo; 行的下面如果添加 Issue ID，则将代码评审和问题之间的建立关联。</li>
<li>在 &ldquo;# [Reviewer]&rdquo; 行的下面添加代码评审者姓名，一个一行，或者用逗号分隔。</li>
<li>在 &ldquo;# [Cc]&rdquo; 行的下面添加代码评审的关注者姓名，一个一行，或者用逗号分隔。</li>
<li>在 &ldquo;# [Draft]&rdquo; 行的下面如果输入 yes，则表明要创建一个草稿模式的代码评审。</li>
</ul>

<p>在最下面的 &ldquo;Step 2&rdquo; 区域，显示当前项目将要上传到远程仓库的分支和提交列表。检查提交列表，如果不想创建此次代码评审，则将 &ldquo;branch &hellip;&rdquo; 的行注释掉，或者删掉，如果需要为此项目和分支创建代码评审，则打开对应的 &ldquo;branch &hellip;&rdquo; 行。</p>

<p>例如将 project foo 的 branch topic1 所在行的注释去掉，而保留 project bar 的 branch topic1 行的注释。如下：</p>

<pre><code>##############################################################################
# Step 2: Select project and branches for upload
#
# Note: Uncomment the branches to upload, and not touch the project lines
##############################################################################
#
# project foo:
  branch topic1 ( 3 commit(s)) to remote branch master:
#         03c01e211122b49fe05f48e08fd3e1dd1c52e57e
#         ec78989440697fbc13bfbd3ea082fe9b3fc5f2d7
#         4e599aa284ed64ba12ba1b5b06fbbd3199846434
#
# project bar:
#  branch topic1 ( 2 commit(s)) to remote branch master:
#         47a3cae46019893db78a19906dda97825279f288
#         ced1a1d6e16bc3f8051f87621eb69ba2a7e10672 
</code></pre>

<p>保存并退出编辑器，则只向 project foo 发起代码评审，而不会向 project bar 发起代码评审。</p>

<h2 id="命令格式">命令格式</h2>

<pre><code>git repo upload [options...] [project...]
</code></pre>

<h2 id="选项">选项</h2>

<p>主要的选项如下：</p>

<ul>
<li><code>--cbr</code>：为当前分支的修改创建代码评审。</li>
<li><code>--br &lt;branch-name&gt;</code>：为指定的分支中的修改创建代码评审。</li>
<li><code>--re &lt;user1,user2,...&gt;</code>：设置代码评审人。</li>
<li><code>--cc &lt;user1,user2,...&gt;</code>：设置代码评审的关注人。</li>
<li><code>--title &lt;title&gt;</code>：设置代码评审的标题。</li>
<li><code>--description &lt;description&gt;</code>：设置代码评审的描述。</li>
<li><code>--single</code>：单仓模式，可用于不使用 manifest 清单仓库的单仓库项目。</li>
</ul>
<div class="edit-meta">

<br></div><nav class="pagination"><a class="nav nav-prev" href="/multi-repos/git-repo-start.html" title="git repo start"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - git repo start</a>
<a class="nav nav-next" href="/multi-repos/git-repo-download.html" title="git repo download">Next - git repo download <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
